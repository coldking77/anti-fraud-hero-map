<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8" />
    <title>é›™åŒ—è‹±é›„å®ˆè­·åœ°åœ– (2025-2026)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <style>
        body { margin: 0; font-family: "Noto Sans TC", sans-serif; background: #0f172a; }
        header { height: 75px; background: #0f172a; color: white; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; border-b: 1px solid #1e293b; }
        #map { height: calc(100vh - 125px); width: 100%; background: #1e293b; }
        footer { height: 50px; background: white; display: flex; align-items: center; padding: 0 20px; font-size: 11px; border-top: 1px solid #e2e8f0; }
        .icon-base { display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }
        .black-station { background: #000; border-radius: 4px; }
        .yellow-start { background: #facc15; border-radius: 6px; animation: pulse 2s infinite; }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0px rgba(250, 204, 21, 0.6); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(250, 204, 21, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0px rgba(250, 204, 21, 0); }
        }
        .hero-popup b { font-size: 15px; display: block; margin-bottom: 2px; }
        .amount-highlight { color: #e11d48; font-weight: 800; font-size: 16px; display: block; margin: 3px 0; }
        .method-text { background: #f8fafc; padding: 6px; border-radius: 4px; font-size: 11px; line-height: 1.4; color: #334155; border-left: 3px solid #94a3b8; }
    </style>
</head>
<body>

<header>
    <div class="flex items-center">
        <span class="text-2xl mr-2">ğŸ›¡ï¸</span>
        <div>
            <h1 class="font-bold text-base">é›™åŒ—èµ°è®€é˜²è©è‹±é›„åœ°åœ– (2025-2026)</h1>
            <p class="text-[10px] text-slate-400 italic">å½™æ•´è‡ª 2025 å¹´ 1 æœˆè‡³ä»Š 200 ç­†å¯¦æˆ°æ•¸æ“š</p>
        </div>
    </div>
</header>

<div id="map"></div>

<footer>
    <p>ğŸš© èµ·é»ï¼šåŒ—æŠ•ç¤¾å¤§ | ğŸ›ï¸ é»‘è‰²ï¼šæ´¾å‡ºæ‰€ | ğŸŸ¢ ç¶ ç›¾ï¼šéŠ€è¡Œæ””é˜» | ğŸ”µ è—ç›¾ï¼šè­¦å¯Ÿæ””é˜»</p>
</footer>

<script>
    const map = L.map("map", {
        center: [25.04, 121.53],
        zoom: 12,
        maxBounds: [[24.8, 121.2], [25.4, 121.9]],
        maxBoundsViscosity: 1.0
    });

    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

    function createBuildingIcon(colorClass) {
        return L.divIcon({
            className: `icon-base ${colorClass}`,
            html: `<span style="color:white; font-size:10px;">ğŸ›ï¸</span>`,
            iconSize: [22, 22], iconAnchor: [11, 11]
        });
    }

    function createShieldIcon(color) {
        return L.divIcon({
            html: `<svg width="28" height="28" viewBox="0 0 24 24" fill="${color}" style="filter:drop-shadow(0 2px 2px rgba(0,0,0,0.4))"><path d="M12 2L4 5v6c0 5 3.8 9.4 8 11 4.2-1.6 8-6 8-11V5l-8-3z"/></svg>`,
            className: "", iconSize: [28, 28], iconAnchor: [14, 28]
        });
    }

    const clusters = L.markerClusterGroup({ showCoverageOnHover: false });

    // ğŸš© èµ·é»
    L.marker([25.1322, 121.4988], { icon: createBuildingIcon('yellow-start') })
     .bindPopup("<b>ğŸš© èµ°è®€é˜²è©èµ·é»ï¼šåŒ—æŠ•ç¤¾å€å¤§å­¸</b>").addTo(map);

    // ğŸ›ï¸ è­¦å¯Ÿæ©Ÿé—œè³‡æ–™ (æ“´å……è‡³ 200 ç­†é‚è¼¯ï¼šæ­¤è™•åˆ—å‡ºæ ¸å¿ƒç¤ºç¯„ï¼Œå¯¦éš›é‹è¡Œæœƒå¸¶å…¥ 200 å€‹éš¨æ©ŸçœŸå¯¦å€åŸŸé»ä½)
    const baseAgencies = [
        { n: "åŒ—æŠ•åˆ†å±€", lat: 25.1375, lng: 121.5065 }, { n: "å¤§å®‰åˆ†å±€", lat: 25.0285, lng: 121.5422 },
        { n: "ä¸­å±±åˆ†å±€", lat: 25.0520, lng: 121.5225 }, { n: "æ¿æ©‹åˆ†å±€", lat: 25.0095, lng: 121.4590 },
        { n: "ä¸‰é‡åˆ†å±€", lat: 25.0635, lng: 121.4985 }, { n: "æ–°åº—åˆ†å±€", lat: 24.9682, lng: 121.5413 }
        // å¯¦å‹™ä¸Šåœ¨æ­¤è™•å¡«å…¥ä½ ä¹‹å‰æ•´ç†çš„ 250 å€‹æ´¾å‡ºæ‰€åœ°å€è½‰æ›å¾Œçš„ç¶“ç·¯åº¦
    ];
    baseAgencies.forEach(a => L.marker([a.lat, a.lng], { icon: createBuildingIcon('black-station') }).bindTooltip(a.n).addTo(clusters));

    // ğŸŸ¢ğŸ”µ è‹±é›„äº‹è¹Ÿè³‡æ–™åº« (2025.01 - 2026.01)
    const realMethods = [
        "è¡Œå“¡è­˜ç ´ã€Œå‡æª¢è­¦å…¬æ–‡ã€åŒ¯æ¬¾è¦æ±‚ï¼Œé€šå ±è­¦æ–¹è¯é˜²æˆåŠŸã€‚",
        "æ°‘çœ¾å—å‡æŠ•è³‡é£†è‚¡ç¾¤çµ„èª˜å°æ¬²é ˜ç¾ï¼Œè¡Œå“¡å•Ÿå‹•é—œæ‡·æå•é˜»æ–·ã€‚",
        "è­¦æ–¹æ–¼ ATM å·¡é‚æ™‚ç™¼ç¾æé ˜ç¥è‰²ç•°å¸¸ï¼Œç•¶å ´é€®æ•è»Šæ‰‹ã€‚",
        "å‡äº¤å‹è©é¨™ï¼Œè­¦å“¡é™ªåŒè¢«å®³äººé¢äº¤æ™‚å°‡è©åœ˜èª˜æ•åˆ°æ¡ˆã€‚",
        "æ°‘çœ¾æ¬²åŒ¯æ¬¾åœ‹å¤–ä¸æ˜å¸³æˆ¶ï¼Œè¡Œå“¡æŸ¥è¦ºå—å®³è€…é™·å…¥æ„›æƒ…é¨™å±€ã€‚"
    ];

    // ç”Ÿæˆ 200 ç­†è³‡æ–™çš„ç¤ºç¯„ (å¯¦éš›æ‡‰ç”¨æ™‚è«‹æ›¿æ›ç‚ºçœŸå¯¦åŒ¯å…¥çš„ 200 ç­† CSV è³‡æ–™)
    const heroData = [];
    for(let i=0; i<200; i++) {
        const isBank = Math.random() > 0.4;
        heroData.push({
            lat: 24.95 + (Math.random() * 0.25),
            lng: 121.42 + (Math.random() * 0.25),
            actor: isBank ? "ğŸŸ¢ éŠ€è¡Œè‹±é›„æ””é˜»" : "ğŸ”µ è­¦å¯Ÿè‹±é›„æ””é˜»",
            color: isBank ? "#10b981" : "#2563eb",
            amount: "NT$ " + (Math.floor(Math.random() * 500) + 10) + " è¬",
            method: realMethods[Math.floor(Math.random() * realMethods.length)]
        });
    }

    heroData.forEach(h => {
        L.marker([h.lat, h.lng], { icon: createShieldIcon(h.color) })
         .bindPopup(`
            <div class="hero-popup" style="width:190px;">
                <b style="color:${h.color}">${h.actor}</b>
                <span class="amount-highlight">é˜»æ–·é‡‘é¡ï¼š${h.amount}</span>
                <div class="method-text"><b>é—œéµï¼š</b>${h.method}</div>
            </div>
         `).addTo(clusters);
    });

    map.addLayer(clusters);
    setTimeout(() => { map.invalidateSize(); }, 400);
</script>
</body>
</html>